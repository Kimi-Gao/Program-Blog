> https://github.com/muwenzi/Program-Blog/issues/68

<h1>目录</h1>

<!-- TOC -->

- [1. 什么是外边距重叠？](#1-什么是外边距重叠)
- [2. 几种外边距重叠的现象](#2-几种外边距重叠的现象)
  - [2.1. 元素的顶外边距与前面元素的底外边距发生叠加](#21-元素的顶外边距与前面元素的底外边距发生叠加)
  - [2.2. 元素的顶外边距与父元素的顶外边距发生叠加](#22-元素的顶外边距与父元素的顶外边距发生叠加)
  - [2.3. 元素的顶外边距与底外边距发生叠加](#23-元素的顶外边距与底外边距发生叠加)
  - [2.4. 空元素中已经叠加的外边距与另一个空元素的外边距发生叠加](#24-空元素中已经叠加的外边距与另一个空元素的外边距发生叠加)
- [3. 外边距重叠的意义](#3-外边距重叠的意义)
- [4. 外边距重叠例外情况](#4-外边距重叠例外情况)
- [5. 外边距重叠的预防](#5-外边距重叠的预防)
- [6. 参考资料](#6-参考资料)

<!-- /TOC -->

# 1. 什么是外边距重叠？

外边距重叠是指两个 **垂直相邻** 的 **块级元素**，当上下两个边距相遇时，起外边距会产生重叠现象，且重叠后的外边距，等于其中较大者。

> :warning: 行内元素、浮动元素或绝对定位元素之间的边界不会叠加。

最终的 margin 值计算方法如下：

- 全部都为正值，取最大者；
- 不全是正值，则都取绝对值，然后用正值减去最大值；
- 没有正值，则都取绝对值，然后用 0 减去最大值。

# 2. 几种外边距重叠的现象

## 2.1. 元素的顶外边距与前面元素的底外边距发生叠加

当一个元素出现在另一个元素上面时，第一个元素的底外边距与第二个元素的顶外边距发生叠加，如图：

![image](https://user-images.githubusercontent.com/12554487/42308599-a2d302b4-8068-11e8-9a5d-54dfe89d2e1e.jpg)

## 2.2. 元素的顶外边距与父元素的顶外边距发生叠加

当一个元素包含在另一个元素之中时，子元素与父元素之间也会产生重叠现象，重叠后的外边距，等于其中最大者。同理，如果一个无内容的空元素，其自身上下边距也会产生重叠：

![image](https://user-images.githubusercontent.com/12554487/42308648-ca92df68-8068-11e8-8871-790bc1a60d54.jpg)

## 2.3. 元素的顶外边距与底外边距发生叠加

尽管初看上去有点儿奇怪，但是外边距甚至可以与本身发生叠加。假设有一个空元素，它有外边距，但是没有边框或填充。在这种情况下，顶外边距与底外边距就碰到了一起，它们会发生叠加，如图：

![image](https://user-images.githubusercontent.com/12554487/42311146-bc2b5aa2-806f-11e8-9f14-01193618e8c0.jpg)

## 2.4. 空元素中已经叠加的外边距与另一个空元素的外边距发生叠加

如果这个外边距碰到另一个元素的外边距，它还会发生叠加，如图：

![image](https://user-images.githubusercontent.com/12554487/42311147-bc7085fa-806f-11e8-93ab-1f02a6eaf8c0.jpg)

# 3. 外边距重叠的意义

外边距叠加初看上去可能有点儿奇怪，但是它实际上是有意义的。以由几个段落组成的典型文本页面为例：

![image](https://user-images.githubusercontent.com/12554487/42311149-bca9cf68-806f-11e8-89ee-f10a512bd9bd.jpg)

第一个段落上面的空间等于段落的顶外边距。如果没有外边距叠加，后续所有段落之间的外边距将是相邻顶外边距和底外边距的和。这意味着段落之间的空间是页面顶部的两倍。如果发生外边距叠加，段落之间的顶外边距和底外边距就叠加在一起，这样各处的距离就一致了。

# 4. 外边距重叠例外情况

1.  相邻的盒模型中，如果其中的一个是浮动的（`float`），垂直 margin 不会重叠，并且浮动的盒模型和它的子元素之间也是这样。
1.  设置了 `overflow` 属性的元素和它的子元素之间的 margin 不被重叠（`overflow: visible` 除外）。
1.  设置了绝对定位（`position:absolute`）的盒模型，垂直 margin 不会被重叠，并且和他们的子元素之间也是一样。
1.  设置了 `display:inline-block` 的元素，垂直 `margin` 不会重叠，甚至和他们的子元素之间也是一样。
1.  如果一个盒模型的上下 `margin` 相邻，这时它的 `margin` 可能重叠覆盖它。在这种情况下，元素的位置（`position`）取决于它的相邻元素的 `margin` 是否重叠。
1.  如果元素的 `margin` 和它的父元素的 `margin-top` 重叠在一起，盒模型 `border-top` 的边界定义和它的父元素相同。
1.  任意元素的父元素不参与 `margin` 的重叠，或者说只有父元素的 `margin-bottom` 是参与计算的。如果元素的 `border-top` 非零，那么元素的 `border-top` 边界位置和原来一样。
1.  一个应用了清除操作的元素的 `margin-top` 绝不会和它的块级父元素的 `margin-bottom` 重叠。
1.  那些已经被重叠覆盖的元素的位置对其他已经重叠的元素的位置没有任何影响；只有在对这些元素的子元素定位时，`border-top` 边界位置才是必需的。
1.  根元素的垂直 `margin` 不会被重叠。

# 5. 外边距重叠的预防

虽然外边距的重叠有其一定的意义，但有时候我们在设计上却不想让元素之间产生重叠，那么可以有如下几个建议可供参考：

1.  外层元素 `padding` 代替
1.  内层元素透明边框 `border:1px solid transparent;`
1.  内层元素绝对定位 `postion:absolute;`
1.  外层元素 `overflow:hidden;`
1.  内层元素加 `float:left;` 或 `display:inline-block;`
1.  内层元素 `padding:1px;`

# 6. 参考资料

1.  [CSS 外边距(margin)重叠及防止方法（作者：胡俊涛）](http://www.hujuntao.com/web/css/css-margin-overlap.html)
1.  [css margin 重叠的问题（作者：张鑫旭）](http://www.zhangxinxu.com/study/200908/margin-overlap.html)
1.  [CSS 中 margin 边界叠加问题及解决方案（作者：佚名）](https://blog.csdn.net/u012028371/article/details/52809119)
